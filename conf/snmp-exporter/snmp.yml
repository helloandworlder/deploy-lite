auths:
  public_v2:
    community: public
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES
    version: 2

modules:
  h3c:
    walk:
      - 1.3.6.1.2.1.1        # system
      - 1.3.6.1.2.1.2.2      # interfaces
      - 1.3.6.1.2.1.31.1.1   # ifXTable
      - 1.3.6.1.4.1.2011     # huawei/h3c 企业 MIB
      - 1.3.6.1.4.1.2021.13  # 自定义模拟器指标的根OID
      - 1.3.6.1.4.1.2021.13.3 # 新增H3C常用模拟指标的根OID
    get:
      - 1.3.6.1.2.1.1.3.0    # sysUpTime
      - 1.3.6.1.2.1.1.5.0    # sysName
      - 1.3.6.1.2.1.1.1.0    # sysDescr
      # 添加自定义OID的get，确保snmp-exporter可以获取它们
      - 1.3.6.1.4.1.2021.13.1.1.0 # simVersion
      - 1.3.6.1.4.1.2021.13.1.2.0 # simGoroutines
      - 1.3.6.1.4.1.2021.13.1.3.0 # simGcCount
      - 1.3.6.1.4.1.2021.13.1.4.0 # simMemoryMB
      - 1.3.6.1.4.1.2021.13.1.5.0 # simUptimeSec
      - 1.3.6.1.4.1.2021.13.1.6.0 # simCpuUsagePercent (also used for simCpuUtilPercent)
      # 新增H3C常用模拟指标的OID
      - 1.3.6.1.4.1.2021.13.3.2.0 # simMemoryUtilPercent
      - 1.3.6.1.4.1.2021.13.3.3.0 # simDeviceTemperatureCelsius
      # Fan status OIDs (indexed, will be walked if parent is in walk, or use specific gets if needed)
      # For simplicity, we'll rely on the walk for indexed values like fan, psu, ifErrors, ifDiscards
      # If direct GETs are preferred for specific instances, they can be added like:
      # - 1.3.6.1.4.1.2021.13.3.4.1.1 # simFanStatus for fan 1
      # - 1.3.6.1.4.1.2021.13.3.5.1.1 # simPsuStatus for psu 1
      # - 1.3.6.1.4.1.2021.13.3.6.1.1 # simIfInErrorsTotal for ifIndex 1
      # - 1.3.6.1.4.1.2021.13.3.7.1.1 # simIfOutDiscardsTotal for ifIndex 1
      - 1.3.6.1.4.1.2021.13.3.8.0 # simArpCacheEntries
      - 1.3.6.1.4.1.2021.13.3.9.0 # simMacTableEntries
      - 1.3.6.1.4.1.2021.13.3.10.0 # simActiveTcpConnections
    metrics:
      - name: sysUpTime
        oid: 1.3.6.1.2.1.1.3.0
        type: gauge
        help: "系统正常运行时间"
      - name: sysName
        oid: 1.3.6.1.2.1.1.5.0
        type: string
        help: "系统名称"
      - name: sysDescr
        oid: 1.3.6.1.2.1.1.1.0
        type: string
        help: "系统描述"
      - name: ifNumber
        oid: 1.3.6.1.2.1.2.1.0
        type: gauge
        help: "网络接口数量"
      - name: ifDescr
        oid: 1.3.6.1.2.1.2.2.1.2
        type: string
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "接口描述"
      - name: ifInOctets
        oid: 1.3.6.1.2.1.2.2.1.10
        type: counter
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "接口输入字节数"
      - name: ifOutOctets
        oid: 1.3.6.1.2.1.2.2.1.16
        type: counter
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "接口输出字节数"
      - name: ifOperStatus
        oid: 1.3.6.1.2.1.2.2.1.8
        type: gauge
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "接口运行状态"
      - name: ifAdminStatus
        oid: 1.3.6.1.2.1.2.2.1.7
        type: gauge
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "接口管理状态"
      # H3C SNMP Simulator 自定义指标
      - name: simVersion
        oid: 1.3.6.1.4.1.2021.13.1.1.0
        type: string
        help: "H3C SNMP模拟器版本"
      - name: simGoroutines
        oid: 1.3.6.1.4.1.2021.13.1.2.0
        type: gauge
        help: "H3C SNMP模拟器 Goroutine 数量"
      - name: simGcCount
        oid: 1.3.6.1.4.1.2021.13.1.3.0
        type: counter
        help: "H3C SNMP模拟器 GC 总次数"
      - name: simMemoryMB
        oid: 1.3.6.1.4.1.2021.13.1.4.0
        type: gauge
        help: "H3C SNMP模拟器内存使用量 (MB)"
      - name: simUptimeSec
        oid: 1.3.6.1.4.1.2021.13.1.5.0
        type: gauge # 虽然是TimeTicks，但在Prometheus中通常用gauge表示持续时间
        help: "H3C SNMP模拟器运行时间 (秒)"
      - name: simCpuUsagePercent
        oid: 1.3.6.1.4.1.2021.13.1.6.0
        type: gauge
        help: "H3C SNMP模拟器CPU使用率 (%) - 模拟值"
      - name: simIfInRateBps
        oid: 1.3.6.1.4.1.2021.13.2.1 # 直接指向 .1 (inRate) 的父OID，索引会自动处理
        type: gauge
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2 # 使用标准ifDescr进行关联
        help: "H3C SNMP模拟器接口输入速率 (Bytes/sec)"
      - name: simIfOutRateBps
        oid: 1.3.6.1.4.1.2021.13.2.2 # 直接指向 .2 (outRate) 的父OID，索引会自动处理
        type: gauge
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2 # 使用标准ifDescr进行关联
        help: "H3C SNMP模拟器接口输出速率 (Bytes/sec)"
      # 新增H3C常用模拟指标的定义
      - name: simCpuUtilPercent
        oid: 1.3.6.1.4.1.2021.13.1.6.0 # Reusing the existing CPU OID from sim
        type: gauge
        help: "SNMP模拟器CPU利用率 (%) - 模拟值"
      - name: simMemoryUtilPercent
        oid: 1.3.6.1.4.1.2021.13.3.2.0
        type: gauge
        help: "SNMP模拟器内存利用率 (%) - 模拟值"
      - name: simDeviceTemperatureCelsius
        oid: 1.3.6.1.4.1.2021.13.3.3.0
        type: gauge
        help: "SNMP模拟器设备温度 (摄氏度) - 模拟值"
      - name: simFanStatus
        oid: 1.3.6.1.4.1.2021.13.3.4.1 # Base OID for fan status table
        type: gauge
        indexes:
          - labelname: fanIndex
            type: integer
        # No direct lookup for fanDescr via SNMP in this sim, labels from Prometheus GaugeVec
        help: "SNMP模拟器风扇状态 (1=normal, 2=failed) - 模拟值"
      - name: simPsuStatus
        oid: 1.3.6.1.4.1.2021.13.3.5.1 # Base OID for PSU status table
        type: gauge
        indexes:
          - labelname: psuIndex
            type: integer
        help: "SNMP模拟器电源状态 (1=normal, 2=failed, 3=not_present) - 模拟值"
      - name: simIfInErrorsTotal
        oid: 1.3.6.1.4.1.2021.13.3.6.1 # Base OID for ifInErrors table
        type: counter
        indexes:
          - labelname: ifIndex
            type: integer
        lookups: # Can lookup ifDescr if needed, similar to ifInOctets
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "SNMP模拟器接口入方向错误包总数 - 模拟值"
      - name: simIfOutDiscardsTotal
        oid: 1.3.6.1.4.1.2021.13.3.7.1 # Base OID for ifOutDiscards table
        type: counter
        indexes:
          - labelname: ifIndex
            type: integer
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
        help: "SNMP模拟器接口出方向丢包总数 - 模拟值"
      - name: simArpCacheEntries
        oid: 1.3.6.1.4.1.2021.13.3.8.0
        type: gauge
        help: "SNMP模拟器ARP缓存条目数 - 模拟值"
      - name: simMacTableEntries
        oid: 1.3.6.1.4.1.2021.13.3.9.0
        type: gauge
        help: "SNMP模拟器MAC地址表条目数 - 模拟值"
      - name: simActiveTcpConnections
        oid: 1.3.6.1.4.1.2021.13.3.10.0
        type: gauge
        help: "SNMP模拟器活动TCP连接数 - 模拟值"